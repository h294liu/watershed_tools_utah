# HRU discretization workflow setting file.
# Characters '|' is used as the separators to find the actual setting values; comments are set with '#'
# Any text behind '|' is assumed to be part of the setting value, unless preceded by '#'.

# Note on path specification
# If deviating from default paths, a full path must be specified. E.g. '/home/user/non-default/path/'

## ---- Main directory paths and domain files ---- 
basin_name                      | Utah                         # use as the basin data directory
basin_data_path                 | /Users/hongliliu/Documents/tmp/utah/  # top of directory storing working basin data
basin_gru_shp                   | /Users/hongliliu/Documents/tmp/utah/gis/wb-2853886_gru.shp     # basin GRU shapefile, read from 'basin_data_path'/gis/  # if 'default' entered, set to 'basin_data_path'/gis/gru.shp, extracted from 'fulldom_gru_shpfile'
main_path                       | /Users/hongliliu/Documents/tmp/utah/    # main directory of local repo
tmpfile_path                    | /Users/hongliliu/Documents/tmp/utah/temp/                             # temporary file path

## ---- Full large-domain input data files (used for crop) ----
fulldom_dem_raster              | /Users/hongliliu/Documents/proj_uw_ncar/2020_06_02HRUcomplexity/discretize/source_data/MERIT_Hydro_dem_NLDAS.tif  # large-domain DEM raster
fulldom_landcover_raster        | /Users/hongliliu/Documents/proj_uw_ncar/2020_06_02HRUcomplexity/discretize/source_data/annual_climate_lc.tif  # large-domain land cover raster
fulldom_soiltype_raster         | /Users/hongliliu/Documents/proj_uw_ncar/2020_06_02HRUcomplexity/discretize/source_data/usda_mode_soilclass_vCompressed_NA_250m_ll.tif
fulldom_flowline_shp            | /Users/hongliliu/Documents/proj_uw_ncar/2020_06_02HRUcomplexity/discretize/source_data/riv_pfaf_7_MERIT_Hydro_v07_Basins_v01_wUS.shp   # large-domain stream line shapefile

## ---- GRU and HRU column names and data types in gru and hru shapefiles ----
# Some available dtypes for rasterio: 'int16', 'int32', 'float32', 'float64'. No 'int64'!
gruNo_fieldname                 | gruNo               # field name of the gru number column, e.g.,1,2,3...
gruNo_field_dtype               | int32               # used to save the gru raster.  Cannot be 'int64'
gruId_fieldname                 | gruId               # field name of gru ID column, e.g., 100800120101. 
hruNo_fieldname                 | hruNo               # field name of the hru number column, e.g.,1,2,3...
hruNo_field_dtype               | int32               # int32, used to save the hru raster.  Cannot be 'int64'
hruId_fieldname                 | hruId               # field name of the hru ID column, e.g., 10080012010101, 100800120102 ...

## ---- Projection and nodata value in data processing ----
epsg                            | 6933                # Global equal area. EASE Grid 2.0

## ---- HRU elimination threshold (two options: value, fraction) ----
hru_threshold_type              | fraction            # ['value' | 'fraction'] use a constant area value (m^2)or area fraction to eliminate small HRUs
hru_threshold                   | 0.05                # area threshold, fraction of the gru area.

## ---- Radiation calculation period ----
solrad_start_DOY                | 75                  # March 15 (approx start of snowmelt)
solrad_end_DOY                  | 167                 # June 15 (approx end of snowmelt)

## ---- Intermediate files (these could be hard-coded names) ---- 
basin_flowlines_shp             | flowlines_prj.shp   # basin stream line shapefile   # basin stream shapefile path ['basin_data_path/flowlines_prj.shp']; only exists reprojected
basin_gruId_txt                 | gruIds.txt          # text file with the list of basin HUC ids ['basin_data_path/hucIds.txt]
                                                      #   generated by 'prepare_basin_shapefiles' script
basin_gruNo_gruId_txt           | gruNo_gruID.txt     # textfile, correspondence of GRU number and GRU id ['basin_data_path/gruNo_gruId.txt']
                                                      #   generated by 'rasterize_vector()' in 'prepare_dem' script
basin_gru_raster                | gru.tif             # projected domain GRU raster path. ['basin_data_path/gru.tif']
basin_dem_raster                | dem.tif             # basin dem raster path. ['basin_data_path/dem.tif']
basin_slope_raster              | slope.tif           # basin slope raster path. ['basin_data_path/slope.tif']
basin_aspect_raster             | aspect.tif          # basin slope raster path. ['basin_data_path/aspect.tif']
basin_soiltype_raster           | soiltype.tif        # basin soil raster path. ['basin_data_path/soil.tif']
basin_soil_resample_raster      | soiltype_resample.tif    # basin soil resample raster path. ['basin_data_path/soiltype_resample.tif']
basin_radiation_raster          | swrad.tif           # basin radiation raster path. ['basin_data_path/swrad.tif']

basin_landcover_raster          | landcover.tif       # basin landcover raster path. ['basin_data_path/landcover.tif']
basin_landcover_resample_raster | lc_resample.tif     # basin landcover resample raster path, resampled to refraster res. ['gis_path/lc_resample.tif]
basin_canopy_class_raster       | canopy_class.tif    # basin landcover class raster path (eg, 1: canopy, 2: non-canopy)] ['gis_path/canopy_class.tif']
refraster                       | default             # reference raster file, read from basin_data_path/, used in vector rasterization and resampling
                                                      #   if 'default', set to the same as the 'basin_dem_raster' entry; otherwise must exist

## ---- Fieldnames to assign to discretized shapefiles ---- 
elev_class_fieldname            | elevClass           # field name of the elevation class column in HRU. 
land_class_fieldname            | lcClass             # field name of the land class column in HRU.   # change to 'canopy'
radiation_class_fieldname       | radClass            # field name of the radiation class column in HRU.
hru_area_fieldname              | areaSqm             # field name of the HRU area, used in small HRU elimination.

## ---- Optional.  Catchment shapefile extraction from larger domain shapefile ----
fulldom_gru_shpfile             | /Users/hongliliu/Documents/proj_uw_ncar/2020_06_02HRUcomplexity/discretize/source_data/cat_pfaf_74_MERIT_Hydro_v07_Basins_v01_bugfix1.shp      # large-domain GRU shapefile, if needed
gru_fieldname                   | gruId                                                      